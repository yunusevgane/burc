name: demo
on:
  push:
    branches:
      - 'main'

jobs:
  conditional_step:
    runs-on: 'ubuntu-20.04'
    steps:
    - uses: actions/checkout@v2
      with:
        # Checkout as many commits as needed for the diff
        fetch-depth: 2
    - shell: pwsh
      # Give an id to the step, so we can reference it later
      id: check_file_changed
      run: "cp -p pubspec.yaml pubspec2.yaml"
# name: CI

# on: push

# # on:
# #   pull_request:
# #     branches:
# #       - main

# jobs:
#   flutter_test:
#     name: Run flutter test and analyze
#     runs-on: ubuntu-latest
#     steps:
#       - uses: actions/checkout@v2
#       - uses: actions/setup-java@v1
#         with:
#           java-version: "12.x"
#       - uses: subosito/flutter-action@v1
#         with:
#           channel: "stable"
#       - run: flutter pub get
#       - run: flutter format .
#       - run: dart fix --dry-run
#       - run: dart fix --apply
#       # - run: flutter analyze
#       - run: flutter test

#   build_ios:
#     name: Build Flutter (iOS)
#     needs: [flutter_test]
#     runs-on: macos-latest
#     steps:
#       - uses: actions/checkout@v3
#       - uses: actions/setup-java@v1
#         with:
#           java-version: "12.x"
#       - uses: subosito/flutter-action@v2
#         with:
#           channel: "stable"
#       - run: flutter pub get
#       - run: flutter clean
#       - run: flutter build ios --release --no-codesign

#   build_appbundle:
#     name: Build Flutter (Android)
#     needs: [flutter_test]
#     runs-on: ubuntu-latest
#     steps:
#       - uses: actions/checkout@v2
#       - uses: actions/setup-java@v1
#         with:
#           java-version: "12.x"
#       - uses: subosito/flutter-action@v1
#         with:
#           channel: "stable"
#       - run: flutter pub get
#       - run: flutter clean
#       - run: flutter build appbundle
